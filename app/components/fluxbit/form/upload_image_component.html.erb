<%= content_tag :div, **@wrapper_html do %>
  <div id="<%= id %>" class="grow lg:mt-0 lg:shrink-0 lg:grow-0">
    <%= label %>
    <div class="mt-1 lg:hidden">
      <div class="flex items-center">
        <div class="inline-block h-12 w-12 shrink-0 overflow-hidden <%= container_rounded_class %> relative" aria-hidden="true">
          <%= has_initials? ? initials_element : image_element %>
        </div>
        <div class="ml-5 rounded-md shadow-xs">
          <div class="group relative flex items-center justify-center rounded-md border border-slate-300 py-2 px-3 focus-within:ring-2 focus-within:ring-sky-500 focus-within:ring-offset-2 hover:bg-slate-50">
            <label for="mobile-<%= id %>" class="pointer-events-none relative text-sm font-medium leading-4 text-slate-700">
              <span><%= @title %></span>
              <span class="sr-only"><%= @label %></span>
            </label>
            <%= input_element(input_id: "mobile-#{id}") %>
          </div>
        </div>
      </div>
    </div>

    <div class="relative hidden overflow-hidden <%= container_rounded_class %> lg:block w-40 h-40">
      <div class="absolute inset-0 w-full h-full overflow-hidden <%= container_rounded_class %>" aria-hidden="true">
        <%= has_initials? ? initials_element : image_element %>
      </div>
      <label for="desktop-<%= id %>" class="absolute inset-0 flex flex-col items-center justify-center bg-blue-800/75 text-sm font-medium text-white opacity-0 hover:opacity-100 <%= container_rounded_class %>">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
        <span><%= @title %></span>
        <span class="sr-only"><%= @label %></span>
        <%= input_element(input_id: "desktop-#{id}") %>
      </label>
    </div>
    <%= help_text %>
  </div>

  <script>
    function loadFile(event, id) {
      const elements = document.querySelectorAll('.img_photo_' + id);
      if (event.target.files && event.target.files[0]) {
        elements.forEach(function(element) {
          if (element.hasAttribute('data-initials-placeholder')) {
            const img = document.createElement('img');
            img.className = element.className.replace('flex items-center justify-center', '');
            img.alt = element.querySelector('span')?.textContent || 'Uploaded image';
            img.classList.remove('bg-gradient-to-br', 'from-blue-500', 'to-purple-600', 'from-green-500', 'to-teal-600', 'from-pink-500', 'to-rose-600', 'from-orange-500', 'to-red-600', 'from-indigo-500', 'to-blue-600', 'from-purple-500', 'to-pink-600', 'from-cyan-500', 'to-blue-600', 'from-emerald-500', 'to-green-600', 'from-amber-500', 'to-orange-600', 'from-violet-500', 'to-purple-600');
            img.classList.add('object-cover');
            img.src = URL.createObjectURL(event.target.files[0]);
            img.onload = function() {
              URL.revokeObjectURL(img.src);
            }
            element.parentNode.replaceChild(img, element);
          } else {
            element.src = URL.createObjectURL(event.target.files[0]);
            element.onload = function() {
              URL.revokeObjectURL(element.src);
            }
          }
        });
      }
    }
  </script>
<% end %>